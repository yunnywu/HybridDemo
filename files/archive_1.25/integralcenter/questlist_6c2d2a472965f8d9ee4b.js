webpackJsonp([33],{164:function(e,t,n){"use strict";function r(e,t){var n;return n={},n[s.a]={types:[a,o,i],endpoint:"completeTask",json:!0,params:{taskId:e},showLoading:t},n}var s=n(4);n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i});var a="INTEGRALCENTER_COMPLETE_REQUEST",o="INTEGRALCENTER_COMPLETE_SUCCESS",i="INTEGRALCENTER_COMPLETE_FAILURE";t.a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,s){var a=s().page.isCompleteFetching;return a?null:n(r(e,t))}}},165:function(e,t,n){"use strict";function r(e){var t;return t={},t[s.a]={types:[a,o,i],endpoint:"taskCenter",json:!0,showLoading:e},t}var s=n(4);n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i});var a="INTEGRALCENTER_QUESTLIST_REQUEST",o="INTEGRALCENTER_QUESTLIST_SUCCESS",i="INTEGRALCENTER_QUESTLIST_FAILURE";t.a=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,n){var s=n().page.isFetching;return s?null:t(r(e))}}},398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),s=n(588),a=n(552),o=n.i(r.a)(s.a);o(a.a)},484:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),p=n(27),l=n.n(p),c=n(1),u=n.n(c),f=n(643),T=(n.n(f),function(e){function t(){var n,a,o;r(this,t);for(var p=arguments.length,c=Array(p),f=0;f<p;f++)c[f]=arguments[f];return n=a=s(this,e.call.apply(e,[this].concat(c))),a.taskMap={7:function(){u.a.ui.goBindCard().then(function(){a.props.loadQuestlist()})},8:function(){u.a.navigator.fixList()}},a.completeTask=l()(function(e,t){var n={7:"首次绑卡",8:"首次完成稳健理财投资",9:"完成风险把脉",1:"签到",10:"财富派公众号账号绑定",11:"升级App"};return function(r){r.preventDefault(),u.a.stats("Public_PointCenter",{"任务中心页":"点击去完成"+n[e]}),a.props.isLogin?0===t&&a.props.completeTask(e).then(function(t){var n=t.retCode,r=t.retMsg;0===n?1===a.props.completeTaskResult.completeState?(u.a.ui.alert("提示","领取成功","知道了"),a.props.loadQuestlist()):a.taskMap[e]?a.taskMap[e]():a.props.completeTaskResult.routeAvailable?1===e?u.a.ui.window.open(a.props.completeTaskResult.route,"签到"):u.a.ui.window.open(a.props.completeTaskResult.route):u.a.ui.alert("提示",a.props.completeTaskResult.routeNotAvailMsg,"知道了"):u.a.ui.alert("提示",r,"知道了")}):u.a.ui.goLogin()}},function(e,t){return e+"_"+t}),a.renderTaskList=function(e,t){var n=null;return 0!==t.length&&(n=i.a.createElement("div",{className:"quest-cont"},i.a.createElement("h2",{className:"tit"},i.a.createElement("span",null,e)),i.a.createElement("ul",null,t.map(function(e,t){return i.a.createElement("li",{key:t},i.a.createElement("span",{className:"quest-name"},e.name),i.a.createElement("span",{className:"quest-prize"},e.rewards),i.a.createElement("a",{href:"#",className:e.completeState?"action-btn disabled":"action-btn",onClick:a.completeTask(e.taskId,e.completeState)},e.btnLabel))})))),n},a.appleTip=function(){var e=null;return u.a.ua.os.iOS&&(e=i.a.createElement("div",{className:"tips"},"本活动由财富派提供，和苹果公司（Apple Inc）无关")),e},a.sortLists=function(){var e=i.a.createElement("div",{className:"quest-list"},a.renderTaskList("每日任务",a.props.dailyTask),a.renderTaskList("特别任务",a.props.specialTask),a.renderTaskList("新手任务",a.props.newUserTask));return a.props.newUserTask.forEach(function(t){0===t.completeState&&(e=i.a.createElement("div",{className:"quest-list"},a.renderTaskList("新手任务",a.props.newUserTask),a.renderTaskList("每日任务",a.props.dailyTask),a.renderTaskList("特别任务",a.props.specialTask)))}),e},o=n,s(a,o)}return a(t,e),t.prototype.render=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"mod mod-questcenter"},this.sortLists(),i.a.createElement("div",{className:"more-cont"},i.a.createElement("span",{className:"icon-smile"},"更多任务 敬请期待")),this.appleTip()))},t}(o.Component));T.displayName="IntegralcenterQuestlist",T.propTypes={isLogin:o.PropTypes.bool,completeTask:o.PropTypes.func,loadQuestlist:o.PropTypes.func,newUserTask:o.PropTypes.arrayOf(o.PropTypes.shape({taskId:o.PropTypes.number,name:o.PropTypes.string,rewards:o.PropTypes.string,completeState:o.PropTypes.number,btnLabel:o.PropTypes.string})),dailyTask:o.PropTypes.array,specialTask:o.PropTypes.array,completeTaskResult:o.PropTypes.object},T.defaultProps={newUserTask:[],dailyTask:[],specialTask:[]},t.a=T},552:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=e.page,n=t.data,r=n.dailyTask,s=n.newUserTask,a=n.specialTask,o=t.completeTaskResult,i=t.isCompleteFetching,p=e.user.isLogin;return{isLogin:p,dailyTask:r,newUserTask:s,specialTask:a,completeTaskResult:o,isCompleteFetching:i}}var i=n(0),p=n.n(i),l=n(1),c=n.n(l),u=n(5),f=n(165),T=n(61),d=n(164),m=n(484),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(e){function t(){return r(this,t),s(this,e.apply(this,arguments))}return a(t,e),t.prototype.componentWillMount=function(){this.props.loadQuestlist()},t.prototype.componentDidMount=function(){var e=this;c.a.ui.window.openDropDownRefresh(function(){e.props.loadUser(!0),e.props.loadQuestlist(!1)}),c.a.lifeStage.viewWillAppear(function(){e.props.loadUser(),e.props.loadQuestlist(!1)})},t.prototype.render=function(){return p.a.createElement(m.a,y({},this.props,{loadQuestlist:this.props.loadQuestlist}))},t}(i.Component);E.displayName="IntegralcenterQuestlistPage",E.propTypes={isLogin:i.PropTypes.bool,loadQuestlist:i.PropTypes.func,loadUser:i.PropTypes.func,completeTask:i.PropTypes.func,dailyTask:i.PropTypes.array,newUserTask:i.PropTypes.array,specialTask:i.PropTypes.array,isCompleteFetching:i.PropTypes.bool,completeTaskResult:i.PropTypes.object},t.a=n.i(u.a)(o,{loadQuestlist:f.a,completeTask:d.a,loadUser:T.d})(E)},588:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,loaded:!1,data:{},isCompleteFetching:!1,completeTaskResult:{}},t=arguments[1];switch(t.type){case i.b:return o()({},e,{isFetching:!0});case i.c:return o()({},e,{isFetching:!1,loaded:!0,data:t.response.result});case i.d:return o()({},e,{isFetching:!1});case p.b:return o()({},e,{isCompleteFetching:!0});case p.c:return o()({},e,{isCompleteFetching:!1,completeTaskResult:t.response.result});case p.d:return o()({},e,{isCompleteFetching:!1});default:return e}}var s=n(6),a=n(2),o=n.n(a),i=n(165),p=n(164);t.a=n.i(s.a)(r)},643:function(e,t){},970:function(e,t,n){e.exports=n(398)}},[970]);
//# sourceMappingURL=questlist_6c2d2a472965f8d9ee4b.js.map