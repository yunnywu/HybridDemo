webpackJsonp([22],{14:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.renderItems=function(){var e=this.props.items.map(this.props.itemRenderer),t=this.props.className;return this.props.itemsRenderer(e,{className:t})},t.prototype.render=function(){var e=this.props.items;return e&&0!==e.length?this.renderItems():null},t}(a.Component);l.displayName="List",l.propTypes={className:a.PropTypes.string,items:a.PropTypes.array.isRequired,itemRenderer:a.PropTypes.func,itemsRenderer:a.PropTypes.func},l.defaultProps={itemRenderer:function(e,t){return s.a.createElement("div",{key:t},e)},itemsRenderer:function(e,t){return s.a.createElement("div",t,e)}},t.a=l},285:function(e,t,n){"use strict";function r(e,t,n){var r;return r={},r[o.a]={types:[i,a,s],endpoint:"userPointList",json:!0,params:{page:e},showLoading:n},r.refresh=t,r.page=e,r}var o=n(4);n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s});var i="INTEGRALCENTER_INTEGRALDETAIL_REQUEST",a="INTEGRALCENTER_INTEGRALDETAIL_SUCCESS",s="INTEGRALCENTER_INTEGRALDETAIL_FAILURE";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,o){var i=o().page,a=i.isFetching,s=i.pointTotalPages,l=void 0===s?0:s,c=o().page.pointCurrentPage,p=void 0===c?0:c;return e&&(p=0),(a||p>=l)&&!e?(console.log(2),null):n(r(p+1,e,t))}}},29:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e?(e.offsetTop||0)+a(e.offsetParent):0}var s=n(0),l=n.n(s),c=n(14),p=n(31),u=function(e){function t(){var n,i,s;r(this,t);for(var l=arguments.length,c=Array(l),p=0;p<l;p++)c[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(c))),i.scrollListener=function(){var e=document.body.scrollTop||document.documentElement.scrollTop;a(i.el)+i.el.offsetHeight-e-window.innerHeight<250&&(i.detachScrollListener(),i.props.loadMore())},s=n,o(i,s)}return i(t,e),t.prototype.componentDidMount=function(){this.attachScrollListener()},t.prototype.componentDidUpdate=function(){this.attachScrollListener()},t.prototype.componentWillUnmount=function(){this.detachScrollListener()},t.prototype.attachScrollListener=function(){!this.props.hasMore||this.props.isFetching||this.props.error||(window.addEventListener("scroll",this.scrollListener),window.addEventListener("resize",this.scrollListener),this.scrollListener())},t.prototype.detachScrollListener=function(){window.removeEventListener("scroll",this.scrollListener),window.removeEventListener("resize",this.scrollListener)},t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.items,o=t.itemRenderer,i=t.itemsRenderer,a=t.isFetching,s=t.hasMore,u=t.showEnd,f=t.error,d=t.loadMore,h={className:n,items:r,itemRenderer:o,itemsRenderer:i},m={isFetching:a,hasMore:s,showEnd:u,error:f,loadMore:d};return l.a.createElement("div",{ref:function(t){e.el=t}},l.a.createElement(c.a,h),l.a.createElement(p.a,m))},t}(s.Component);u.displayName="InfiniteList",u.propTypes={className:s.PropTypes.string,items:s.PropTypes.array.isRequired,itemRenderer:s.PropTypes.func,itemsRenderer:s.PropTypes.func,isFetching:s.PropTypes.bool,hasMore:s.PropTypes.bool,showEnd:s.PropTypes.bool,error:s.PropTypes.bool,loadMore:s.PropTypes.func.isRequired},u.defaultProps={showEnd:!0},t.a=u},31:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(32),c=(n.n(l),function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=i=o(this,e.call.apply(e,[this].concat(l))),i.retry=function(){i.props.loadMore&&i.props.loadMore()},a=n,o(i,a)}return i(t,e),t.prototype.render=function(){return this.props.isFetching?s.a.createElement("div",{className:"base-loading"},s.a.createElement("i",{className:"icon-loading"}),s.a.createElement("span",{className:"txt"},"加载中")):this.props.showEnd&&!this.props.hasMore?s.a.createElement("div",{className:"base-loading"},s.a.createElement("span",{className:"txt"},"没有更多结果了")):this.props.error?s.a.createElement("div",{className:"base-loading"},s.a.createElement("span",{className:"txt",onClick:this.retry},"加载失败，点击重试")):null},t}(a.Component));c.displayName="LoadStatus",c.propTypes={isFetching:a.PropTypes.bool,showEnd:a.PropTypes.bool,hasMore:a.PropTypes.bool,error:a.PropTypes.bool,loadMore:a.PropTypes.func},t.a=c},32:function(e,t){},397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(587),i=n(551),a=n.i(r.a)(o.a);a(i.a)},483:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),c=n.n(l),p=n(29),u=n(642),f=(n.n(u),function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.renderItem=function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.date,s.a.createElement("span",null,e.time)),s.a.createElement("td",null,e.source),e.amount<0?s.a.createElement("td",{className:"green"},e.amount):s.a.createElement("td",{className:"red"},"+"+e.amount))},n.renderItems=function(e,t){return s.a.createElement("div",t,s.a.createElement("table",{cellPadding:"0",cellSpacing:"0",width:"100%"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{width:"30%"},"时间"),s.a.createElement("th",{width:"45%"},"来源"),s.a.createElement("th",{width:"25%"},"数量")),e)))},n.showTips=function(){n.setState({isShowTips:!0}),c.a.stats("Public_PointCenter",{"积分详情页":"tips点击"})},n.closeTips=function(){n.setState({isShowTips:!1})},n.state={isShowTips:!1},n}return i(t,e),t.prototype.render=function(){var e=this,t={className:"record-cont",items:this.props.pointList,itemRenderer:this.renderItem,itemsRenderer:this.renderItems,isFetching:this.props.isFetching,hasMore:this.props.pointCurrentPage<this.props.pointTotalPages,error:this.props.pointError,showEnd:!0,loadMore:function(){e.props.loadIntegraldetail(!1,!1)}},n=s.a.createElement("div",{className:"record-cont"},s.a.createElement("table",{cellPadding:"0",cellSpacing:"0",width:"100%"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{width:"30%"},"时间"),s.a.createElement("th",{width:"45%"},"来源"),s.a.createElement("th",{width:"25%"},"数量")))));return s.a.createElement("div",null,s.a.createElement("div",{className:"mod mod-integraldetail"},s.a.createElement("div",{className:"amount-cont"},s.a.createElement("div",{className:"amount"},this.props.totalPoint,s.a.createElement("i",{onClick:this.showTips})),s.a.createElement("p",null,"当前积分")),0===this.props.pointList.length?n:s.a.createElement(p.a,t)),this.state.isShowTips?s.a.createElement("div",null,s.a.createElement("div",{className:"mask"}),s.a.createElement("div",{className:"layer"},s.a.createElement("div",{className:"close-btn",onClick:this.closeTips}),s.a.createElement("ul",null,s.a.createElement("li",null,"1、积分有效期截止到2017年3月31日。"),s.a.createElement("li",null,"2、后续积分有效期说明请关注页面的更新。"),s.a.createElement("li",null,"3、本活动最终解释权归财富派所有。")))):null)},t}(a.Component));f.displayName="IntegralcenterIntegraldetail",f.propTypes={pointList:a.PropTypes.arrayOf(a.PropTypes.shape({date:a.PropTypes.string,time:a.PropTypes.string,source:a.PropTypes.string,amount:a.PropTypes.number})),totalPoint:a.PropTypes.any,pointTotalPages:a.PropTypes.number,pointCurrentPage:a.PropTypes.number,isFetching:a.PropTypes.bool,pointError:a.PropTypes.bool,loadIntegraldetail:a.PropTypes.func},f.defaultProps={totalPoint:"--",pointList:[]},t.a=f},551:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.page;return t}var s=n(0),l=n.n(s),c=n(1),p=n.n(c),u=n(5),f=n(285),d=n(483),h=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.componentWillMount=function(){this.props.loadIntegraldetail(!0,!1)},t.prototype.componentDidMount=function(){var e=this;p.a.ui.window.openDropDownRefresh(function(){e.props.loadIntegraldetail(!0,!1)})},t.prototype.render=function(){return l.a.createElement(d.a,this.props)},t}(s.Component);h.displayName="IntegralcenterIntegraldetailPage",h.propTypes={loadIntegraldetail:s.PropTypes.func},t.a=n.i(u.a)(a,{loadIntegraldetail:f.a})(h)},587:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,loaded:!1,pointCurrentPage:0,pointTotalPages:0,pointList:[],pointError:!1,totalPoint:"--"},t=arguments[1];switch(t.type){case s.b:return a()({},e,{isFetching:!0});case s.c:return a()({},e,{isFetching:!1,loaded:!0,totalPoint:t.response.result.totalPoint,pointCurrentPage:t.page,pointTotalPages:t.response.result.totalPages,pointList:[].concat(t.refresh?[]:e.pointList,t.response.result.pointList)});case s.d:return a()({},e,{isFetching:!1,pointError:!0});default:return e}}var o=n(6),i=n(2),a=n.n(i),s=n(285);t.a=n.i(o.a)(r)},642:function(e,t){},969:function(e,t,n){e.exports=n(397)}},[969]);
//# sourceMappingURL=integraldetail_357cfdf4596a0d28a874.js.map